# 添加故障转移

运行单个节点意味着你有一个单点故障——没有冗余。好在要防止我们的数据丢失只需要启用另一个节点。只要它的集群名称和配置文件中的一样，一个新的节点会自动加入集群，并且它可以和其他的节点通信。

如果我们启用第二个节点，我们的集群看起来就是一个`双节点集群——所有主分片与副本分片都是被分配的`。


![双节点集群](../images/elas_0203.png)

图1. 双节点集群——所有主分片与副本分片都是被分配的

第二个节点已经加入了集群，并且给他分配了三个 _副本分片_ （每个主分片一个副本）。这也就是说我们可以丢失任意一个节点，然而我们的数据仍然完好无损。

任何一个新建的索引文档讲先存储到一个主分片，然后拷贝到对应的副本分片。这就保证了我们的数据可以从主分片获取，也可以从它的任意一个副本获取。

`集群健康度`现在显示的状态是`绿`，这就意味着6个分片(3个主分片和三个副本分片)是活动的。

```
{
   "cluster_name":          "elasticsearch",
   "status":                "green", (1)
   "timed_out":             false,
   "number_of_nodes":       2,
   "number_of_data_nodes":  2,
   "active_primary_shards": 3,
   "active_shards":         6,
   "relocating_shards":     0,
   "initializing_shards":   0,
   "unassigned_shards":     0
}
```
1. 集群 `状态` 是 `绿`。

我们的集群不仅是功能完整的，并且是 _永久可用的_ 。
